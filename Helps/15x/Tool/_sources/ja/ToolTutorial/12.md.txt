# 12. Fカーブで複雑な動きを指定しよう！

<div class="main">

## 概要

本章では、Fカーブを使用して複雑な動きを指定します。
今までも様々な動かし方を説明してきました。
多くの場合、それらの機能だけで充分です。
しかし、それだけでは足りない場合があります。
そこで、Fカーブを使用して、好きな値に自由に変化できるようにします。

<div align="center">
<iframe src='../../Sample/viewer_ja.html#12_02_Sample/effect1.efk'></iframe>
<p>本章で作成するエフェクト</p>
</div>

ただ、本章では具体的なエフェクトを作成はしません。
上記の画像は本章及び今までの解説の知識で作成できるエフェクトです。

## Fカーブ

Effekseerでは、Fカーブという曲線を設定してパラメーターを制御できます。
制御できるパラメーターは、位置、角度、拡大率、色、などです。

Fカーブウインドウを開いてみましょう。
メニューからFカーブを選択します。そうすると、Fカーブを編集するウインドウが表示されます。

<div align="center">
<img src="../../img/Tutorial/12/init_ja.png" width="80%">
</div>

ただ、編集されるFカーブが表示されていません。

位置ウインドウからFカーブを選択します。

そうすると、Fカーブウインドウの左側に編集可能なFカーブのラベルが表示されます。

表示されたラベルを左クリックすると、Fカーブが表示されます。

<div align="center">
<img src="../../img/Tutorial/12/select_ja.png" width="80%">
</div>

Fカーブに制御点を追加するために、Fカーブをダブルクリックします。
ダブルクリックすると制御点が追加されることがわかります。
2つ制御点を追加してみましょう。

<div align="center">
<img src="../../img/Tutorial/12/two_points_ja.png" width="80%">
</div>

制御点は左クリックで選択して、制御点をドラックすることで移動できます。
制御点を移動させて値が変化するようにしてみましょう。

<div align="center">
<img src="../../img/Tutorial/12/add_points_ja.png" width="80%">
</div>

再生してみると、Fカーブの値に沿ってパーティクルが動くのがわかります。

<div align="center">
<img src="../../img/Tutorial/12/curve1.gif">
</div>

カーブも自由に制御できます。
制御点を選択して、左上の```アンカーの展開```をクリックします。
そうすると、カーブを制御するためのアンカーが表示されます。
アンカーを移動させてカーブを変化させてみましょう。

<div align="center">
<img src="../../img/Tutorial/12/curve_ja.png" width="80%">
</div>

<div align="center">
<img src="../../img/Tutorial/12/curve2.gif">
</div>

隣の```アンカーの縮小```を選択すると、急に値が変化するようになります。

<div align="center">
<img src="../../img/Tutorial/12/add_points_ja.png" width="80%">
</div>

制御点を削除するためには、制御点をダブルクリックかDeleteを押します。

これらを組み合わせて複雑な動きを表現できます。

位置と同じように角度や色も制御できます。

### サンプリング

Effekseerでは、実際にはFカーブを近似した値を使用しています。
そのため、急激な値の変化には対応できない場合があります。
そういうときは、サンプリングの値を小さくします。
そうすると、急激な値の変化に対応できるようになります。

### 便利な操作

#### 複数選択

Fカーブの項目をShiftと左クリックで複数のFカーブを同時に編集できるようになります。

制御点もShiftと左クリックで複数選択できます。複数同時に移動もできます。

<div align="center">
<img src="../../img/Tutorial/12/multi_en.png" width="80%">
</div>

#### 全体表示

Fカーブのラベルをダブルクリックすると、対応するFカーブ全体が表示されます。

<div align="center">
<img src="../../img/Tutorial/12/show_entire.png" width="80%">
</div>


#### タイムラインについて (1.5以降)

Effekseer1.5からタイムラインの種類を選択できるようになりました。
エフェクトの寿命に対して値を設定できたり、直接時間に対して値を設定できます。
詳しくはリファレンスを参照してください。

これらの知識を生かすことで複雑なエフェクトを作成できます。

<div align="center">
<img src="../../img/Tutorial/12/effect1.gif" >
<p>エフェクト</p>
</div>

最後に、本章の知識で作成されたエフェクトをダウンロードできるようにしてみました。

<div align="center">
<a href = "../../Sample/12_02_Sample.zip">ダウンロード</a>
</div>

## まとめ

本章では、Fカーブについて説明しました。
Fカーブを使用して、複雑なエフェクトを作成してみましょう。

</div>
